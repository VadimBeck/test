(function() {
  ymaps.ready(init);

  function init()  {
    let map = new ymaps.Map('map', {
      center: [50.9693, 11.0269],
      zoom: 13,
      controls: ['zoomControl'],
      behaviors: ['drag']
    }, 
    {
      balloonPanelMaxMapArea: 0
    })
    let mark = new ymaps.Placemark([50.964, 11.024], {
      hintContent: '<div class="map__hint">Cafe Vapiano</div>',
      balloonContent: `<div class="map__balloon">
      <span class="map__balloon-text">Cafe Votiv</span><br>
      Dies ist ein unbestatigter Eintrag.<br>
      <br>
      Reichstratsstrabe 17<br>
      1010 Wien<br>
      01 4065913<br>
      <span>cafe votiv.at<br>4 Berichte</span>
      </div>`
    },
    {
      iconLayout: 'default#image',
      iconImageHref: 'img/map-marker.png',
      iconImageSize: [24,31],
      iconImageOffset: [-12, -31]
    });
    
  map.geoObjects.add(mark);
  }
  
}());
(function() {
  const arr = document.querySelectorAll('.anchor');

for (let anchor of arr) {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    
    const blockID = anchor.getAttribute('href');    
    
    document.querySelector('' + blockID).scrollIntoView({
      behavior: 'smooth',
      block: 'start'
    })
  })
  }
}());

(function() {
  const slider = document.querySelector('.actions__list');
  const buttons = document.querySelectorAll('.actions__navigation-link');
  let run = true;

  function moveSlide(index) {
    slider.style.left = -index*100+'%';
  }
  function activate(index) {
    let active = document.querySelector('.actions__navigation-link.is-active');
    if(active !== buttons[index]) {      
      active.classList.remove('is-active');
      buttons[index].classList.add('is-active');      
    }
  }
  for (let i=0; i<buttons.length; i++) {
    buttons[i].addEventListener('click', (e) =>{
      e.preventDefault();
      if(!run) return;
        run = false;
        moveSlide(i)
        activate(i);
        setTimeout(function(){
          run = true;
        },800)          
    })      
  }

}());
(function(){
  const links = document.querySelectorAll(".pagination__item");
  const slides = document.querySelectorAll(".header__slide");
  let active = 0;

  function switchActive(index){    
    if(active !== index) {      
      links[active].classList.remove('is-active');
      links[index].classList.add('is-active');
      slides[active].classList.remove('is-active');
      slides[index].classList.add('is-active');
      active = index;
    }
  }

  for (let i=0; i<links.length; i++) {
    links[i].addEventListener('click', (e) =>{
      e.preventDefault();   
      switchActive(i);
    })      
  }  
}());